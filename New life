import io.restassured.RestAssured;
import io.restassured.http.ContentType;
import io.restassured.response.Response;

public class RallyCreateAndVerifyTestCase {

    public static void main(String[] args) {
        String baseUrl = "https://rally1.rallydev.com/slm/webservice/v2.0"; // Replace with your Rally base URL
        String apiKey = "_your_api_key"; // Replace with your Rally API key
        String projectName = "Your Project Name"; // Replace with the name of your Rally project

        RestAssured.baseURI = baseUrl;

        // Create the JSON payload for the test case
        String jsonPayload = "{\n" +
                "  \"TestCase\": {\n" +
                "    \"Name\": \"Sample Test Case\",\n" +
                "    \"Project\": \"" + projectName + "\",\n" +
                "    \"Method\": \"Manual\",\n" +
                "    \"Priority\": \"High\",\n" +
                "    \"Objective\": \"Verify the functionality of X\"\n" +
                "  }\n" +
                "}";

        // Send POST request to create the test case
        Response createResponse = RestAssured.given()
                .header("Authorization", "Bearer " + apiKey)
                .contentType(ContentType.JSON)
                .body(jsonPayload)
                .post("/testcase");

        // Print response details including response body
        System.out.println("Response status code: " + createResponse.getStatusCode());
        System.out.println("Response body: " + createResponse.getBody().asString());
    }
}
